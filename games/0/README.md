# Lane Runner

Казуальная аркада для Android, написанная на Kotlin. Игрок управляет персонажем, который движется снизу вверх по полосам, избегая столкновений с препятствиями, движущимися сверху вниз. Игра завершается при столкновении с препятствием.

## Основные особенности

- **Кастомное игровое поле** `GameView` с ручной отрисовкой через Canvas API
- **Простое управление**: свайп влево/вправо для перемещения по полосам
- **Программная отрисовка**: все объекты (игрок и препятствия) рисуются программно без использования drawable ресурсов
- **Анимация ходьбы**: персонаж и препятствия анимированы с реалистичным движением рук и ног
- **Динамические полосы**: в режиме Timed Game количество полос меняется каждые 15 секунд (от 3 до 7)
  - Плавная анимация перехода между количеством полос
  - Автоматическое увеличение сложности при уменьшении полос
- **Система управления скоростью**: свайп вверх/вниз для замедления/ускорения препятствий
  - Замедление действует 2 секунды
  - Ускорение действует 2 секунды
- **Визуальный стиль**: минималистичный дизайн с белым фоном и черными фигурами
- **Аудио-визуальная обратная связь**:
  - Фоновая музыка (зацикленная)
  - Звук столкновения
  - Вибрация при столкновении
- **Система очков**: подсчет текущего счета и сохранение лучшего результата
- **Пауза**: возможность поставить игру на паузу в любой момент
- **Адаптивная сложность**: настройка частоты появления препятствий через SeekBar

## Режимы игры

### Timed Game Mode
- Начинается с 3 полос
- Каждые 15 секунд количество полос меняется (3 → 4 → 5 → 6 → 7 → 6 → 5 → 4 → 3...)
- При уменьшении полос скорость препятствий увеличивается
- Очки начисляются при изменении количества полос

### Custom Game Mode
- Выбор количества полос: 2, 3 или 4
- Настройка частоты появления препятствий через SeekBar (0-100)
- Статичное количество полос на протяжении всей игры

## Управление

- **Свайп влево/вправо**: перемещение игрока по полосам
- **Свайп вверх**: замедление всех препятствий на 2 секунды
- **Свайп вниз**: ускорение всех препятствий на 2 секунды
- **Кнопка паузы** (правый верхний угол): поставить/снять игру с паузы
- **Тап после Game Over**: перезапуск игры

## Технические детали

### Структура модуля

- `build.gradle` — настройка Android-приложения
- `MainActivity` — стартовая активити с выбором режима игры и настройками
- `GameActivity` — игровая активити с управлением музыкой
- `GameView` — основной игровой компонент с логикой и отрисовкой
- `Player` — класс игрока с анимацией ходьбы
- `Obstacle` — класс препятствий (также с анимацией ходьбы)
- `res/` — ресурсы, включая:
  - Иконки приложения (adaptive icons)
  - Фоновая музыка (`res/raw/background_music.*`)
  - Звук столкновения (`res/raw/collision_sound.*`)
  - Кастомный шрифт

### Особенности реализации

- **Программная отрисовка**: все объекты рисуются через Canvas API без использования bitmap ресурсов
- **Анимация**: плавная анимация ходьбы с использованием синусоидальных функций
- **Thread-based game loop**: игровой цикл работает в отдельном потоке с частотой ~60 FPS
- **SoundPool**: для воспроизведения коротких звуковых эффектов
- **MediaPlayer**: для фоновой музыки с управлением паузой/возобновлением
- **Vibrator API**: тактильная обратная связь при столкновении
- **SharedPreferences**: сохранение лучшего результата

### Аудио ресурсы

Для работы музыки и звуков необходимо добавить файлы в `res/raw/`:
- `background_music.mp3` (или `.ogg`, `.wav`) — фоновая музыка
- `collision_sound.ogg` (или `.wav`, `.mp3`) — звук столкновения

Если файлы отсутствуют, игра будет работать без звука (без ошибок).

## Сборка и запуск

Модуль подключён в `settings.gradle` как `games:0`. Сборка через Gradle:

```bash
./gradlew :games:0:assembleDebug
```

APK можно установить на устройство или эмулятор с Android API не ниже минимальной, определённой в общем `libs.versions.toml`.

## Нюансы игры

- **Коллизии**: столкновение определяется по специальной зоне в нижней части препятствия, что делает игру более справедливой
- **Анимация полос**: при изменении количества полос используется плавная интерполяция с ease-in-out эффектом
- **Умное появление препятствий**: система гарантирует, что не все полосы будут заняты одновременно
- **Синхронизация музыки**: музыка автоматически ставится на паузу при паузе игры, столкновении или сворачивании приложения
- **Визуальный стиль**: минималистичный черно-белый дизайн создает четкий контраст и фокус на игровом процессе

